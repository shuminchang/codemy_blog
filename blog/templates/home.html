{% extends 'base.html' %}
{% load static %}

{% block content %}

<h1>Posts</h1>

{% for post in object_list %}
    <article class="media content-section">
        {% if post.author.profile.profile_pic %}
            <img class="rounded-circle article-img" src="{{ post.author.profile.profile_pic.url }}">
        {% else %}
            <img class="rounded-circle article-img" src="{% static 'blog/images/default_profile_pic.png' %}">
        {% endif %}
        <div class="media-body">
            <div class="article-metadata">
                <a class="mr-2" href="#">{{ post.author }}</a>
                <small class="text-muted">{{ post.post_date|date:"F d, Y"}}</small>
            </div>
            <h2><a class="article-title" href="#">{{ post.title }}</a></h2>
            <p class="article-content">{{ post.body }}</p>
        </div>
    </article>
{% endfor %}

<ul>
{% for post in object_list %}
    <li><a href="{% url 'article-detail' post.pk %}">{{ post.title }}</a> - 
        <a href="{% url 'category' post.category|slugify %}">{{ post.category }}</a> - 
        {{ post.author.first_name }}
        {{ post.author.last_name}} - {{ post.post_date }}
        <small>
            {% if user.is_authenticated %}
                {% if user.id == post.author.id %}
                    - 
                    <a href="{% url 'update_post' post.pk %}">(Edit)</a> 
                    <a href="{% url 'delete_post' post.pk %}">(Delete)</a> 
                {% endif %}
            {% endif %}
        </small> <br/>
    {{ post.snippet }}
    <!-- {{ post.body|slice:":200"|safe }}</li> -->
{% endfor %}
</ul>

{% endblock %}